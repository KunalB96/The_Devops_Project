STEP-BY-STEP PROCEDURE ON EC2 INSTANCE
ğŸŸ¢ STEP 0: Create EC2 Instance (Foundation)
1ï¸âƒ£ Launch EC2

AMI: Amazon Linux 2

Instance type: t3.medium (minimum)

Storage: 20â€“30 GB

Key pair: create/download

2ï¸âƒ£ Security Group (VERY IMPORTANT)

Open these ports:

Port	Purpose
22	SSH
8080	Jenkins
5000	Flask app (optional)
80	Kubernetes LoadBalancer
443	Kubernetes LoadBalancer
3ï¸âƒ£ Attach IAM Role to EC2

Attach ONE role with:

AdministratorAccess (learning purpose)

âœ… This removes need for AWS keys.

ğŸŸ¢ STEP 1: Connect to EC2
ssh -i your-key.pem ec2-user@<EC2-PUBLIC-IP>

ğŸŸ¢ STEP 2: Update EC2 & Install Basic Tools
sudo yum update -y
sudo yum install git unzip -y

ğŸŸ¢ STEP 3: Install Docker
sudo yum install docker -y
sudo systemctl start docker
sudo systemctl enable docker
sudo usermod -aG docker ec2-user
newgrp docker


âœ… Verify:

docker --version
docker ps

ğŸŸ¢ STEP 4: Install AWS CLI v2
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install


âœ… Verify:

aws --version

ğŸŸ¢ STEP 5: Install kubectl
curl -LO https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl
chmod +x kubectl
sudo mv kubectl /usr/local/bin/


âœ… Verify:

kubectl version --client

ğŸŸ¢ STEP 6: Install eksctl
curl -sLO https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_Linux_amd64.tar.gz
tar -xzf eksctl_Linux_amd64.tar.gz
sudo mv eksctl /usr/local/bin/


âœ… Verify:

eksctl version

ğŸŸ¢ STEP 7: Clone the Project Repo
git clone https://github.com/KunalB96/The_Devops_Project.git
cd The_Devops_Project

ğŸŸ¢ STEP 8: Build & Run Docker Image
docker build -t flask-dashboard .
docker run -d -p 5000:5000 flask-dashboard


âœ… Test in browser:

http://<EC2-PUBLIC-IP>:5000

ğŸŸ¢ STEP 9: Push Docker Image to DockerHub
docker login
docker tag flask-dashboard <dockerhub-username>/flask-dashboard:latest
docker push <dockerhub-username>/flask-dashboard:latest

ğŸŸ¢ STEP 10: Create EKS Cluster

âš ï¸ Takes 10â€“15 minutes

eksctl create cluster \
  --name devops-cluster \
  --region us-east-1 \
  --nodes 2 \
  --node-type t3.medium

ğŸŸ¢ STEP 11: Connect kubectl to EKS
aws eks update-kubeconfig \
  --name devops-cluster \
  --region us-east-1


âœ… Verify:

kubectl get nodes

ğŸŸ¢ STEP 12: Deploy App to EKS

Edit Kubernetes manifest:

vi k8s/deployment.yaml


Replace image:

image: <dockerhub-username>/flask-dashboard:latest


Apply:

kubectl apply -f k8s/


Check:

kubectl get pods
kubectl get svc

ğŸŸ¢ STEP 13: Access Application from EKS
kubectl get svc


Copy EXTERNAL-IP â†’ open in browser.

ğŸŸ¢ STEP 14: Install Jenkins on EC2 (Dockerized)
docker run -d \
  --name jenkins \
  -p 8080:8080 \
  -p 50000:50000 \
  -v jenkins_home:/var/jenkins_home \
  jenkins/jenkins:lts


Get admin password:

docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword


Open:

http://<EC2-PUBLIC-IP>:8080

ğŸŸ¢ STEP 15: Jenkins Configuration
Install Plugins

Docker Pipeline

Kubernetes CLI

Git

GitHub Integration

Pipeline

Add Credentials

DockerHub credentials

(AWS creds not needed â€“ EC2 IAM role)

ğŸŸ¢ STEP 16: Create Jenkins Pipeline

Jenkinsfile

pipeline {
  agent any

  environment {
    IMAGE = "<dockerhub-username>/flask-dashboard:${BUILD_NUMBER}"
  }

  stages {
    stage('Clone Repo') {
      steps {
        git 'https://github.com/KunalB96/The_Devops_Project.git'
      }
    }

    stage('Build Image') {
      steps {
        sh 'docker build -t $IMAGE .'
      }
    }

    stage('Push Image') {
      steps {
        sh 'docker push $IMAGE'
      }
    }

    stage('Deploy to EKS') {
      steps {
        sh '''
        aws eks update-kubeconfig --name devops-cluster --region us-east-1
        kubectl set image deployment/flask-deployment flask=$IMAGE
        '''
      }
    }
  }
}

ğŸŸ¢ STEP 17: Trigger Pipeline

âœ” Click Build Now
âœ” Or configure GitHub Webhook

ğŸ¯ FINAL RESULT

âœ” Code pushed â†’ Jenkins triggered
âœ” Docker image built & pushed
âœ” Kubernetes deployment updated
âœ” App live on EKS automatically
